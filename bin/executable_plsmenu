#!/bin/bash
set -euo pipefail

eval "$("$HOME/bin/amen-or-not")"

month=$(date "+%B" | tr '[:upper:]' '[:lower:]')
year=$(date "+%y")
month_sanitized=".${month}_${year}"

options=(
    "$month_sanitized"
    "infame"
    "ambient"
    "experimental"
    "club"
    "mud"
    "weird"
    "bass"
    "140"
    "match"
    "sad"
    "happy"
    "screenshots"
)

choice=$(printf '%s\n' "${options[@]}" | fuzzel --dmenu "$@")

[ -z "$choice" ] && exit 0

if [ "$choice" = "$month" ]; then
    playlist="$current_month_playlist"
else
    playlist="$choice"
fi

zsh -c "mpd_add_to_playlist '$playlist'"
