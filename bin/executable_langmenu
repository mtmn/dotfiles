#!/bin/bash
set -euo pipefail

choice=$(echo -e "en\nsk" | fuzzel --dmenu "$@")
[ -z "$choice" ] && exit 0

case "$choice" in
    en)
        if [ -n "${WAYLAND_DISPLAY:-}" ]; then
            riverctl keyboard-layout us
        else
            setxkbmap us
        fi
        ;;
    sk)
        if [ -n "${WAYLAND_DISPLAY:-}" ]; then
            riverctl keyboard-layout -variant qwerty sk
        else
            setxkbmap sk qwerty
        fi
        ;;
    *)
        echo "Error: Unknown layout '$choice'" >&2
        exit 1
        ;;
esac
